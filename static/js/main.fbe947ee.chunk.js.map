{"version":3,"sources":["Components/Search/Search.module.css","Components/Pagination/Pagination.jsx","Components/Search/Search.jsx","Components/Table/Table.jsx","Components/App/App.jsx","index.js","Components/Table/Table.module.css","Components/Pagination/Pagination.module.css"],"names":["module","exports","Pagination","perPage","totalComments","paginate","pageNumbers","i","Math","ceil","push","className","styles","pagination","map","number","onClick","pageItems","Search","onChange","onChangePerPage","placeholder","searchBar","type","value","Table","React","useState","error","setError","comments","setComments","isLoaded","setIsLoaded","sortedComments","setSortedComments","isSorted","setIsSorted","currentPage","setCurrentPage","setPerPage","useEffect","a","fetch","response","json","items","preparedItems","id","name","email","body","slice","indexOfLastComment","indexOfFirstComment","currentComments","handleClickSort","e","field","target","dataset","direction","sortedElements","sort","b","message","main","container","toString","toLowerCase","filteredItems","filter","item","Object","keys","some","search","data-field","el","row","pageNumber","length","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fbe947ee.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBar\":\"Search_searchBar__3MZwE\"};","import React from \"react\";\r\nimport styles from \"./Pagination.module.css\";\r\n\r\nexport const Pagination = ({ perPage, totalComments, paginate }) => {\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= Math.ceil(totalComments / perPage); i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  return (\r\n    <nav>\r\n      <ul className={styles.pagination}>\r\n        {pageNumbers.map((number) => {\r\n          return (\r\n            <li\r\n              key={number}\r\n              onClick={() => paginate(number)}\r\n              className={styles.pageItems}\r\n            >\r\n              <div>{number}</div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n","import styles from \"./Search.module.css\";\r\n\r\nexport const Search = ({ onChange, onChangePerPage }) => {\r\n  return (\r\n    <div>\r\n      <input\r\n        placeholder=\"Введите запрос\"\r\n        className={styles.searchBar}\r\n        onChange={onChange}\r\n        type=\"text\"\r\n      />\r\n      <label>Выводить на страницу по</label>\r\n      <select onChange={onChangePerPage}>\r\n        <option value=\"10\">10</option>\r\n        <option value=\"20\">20</option>\r\n        <option value=\"30\">30</option>\r\n        <option value=\"40\">40</option>\r\n        <option value=\"50\">50</option>\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Pagination } from \"../Pagination/Pagination\";\r\nimport { Search } from \"../Search/Search\";\r\nimport styles from \"./Table.module.css\";\r\n\r\nexport const Table = () => {\r\n  const [error, setError] = React.useState(null);\r\n  const [comments, setComments] = React.useState([]);\r\n  const [isLoaded, setIsLoaded] = React.useState(false);\r\n  const [sortedComments, setSortedComments] = React.useState([]);\r\n  const [isSorted, setIsSorted] = React.useState(true);\r\n  const [currentPage, setCurrentPage] = React.useState(1);\r\n  const [perPage, setPerPage] = React.useState(10);\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const response = await fetch(\r\n          \"https://jsonplaceholder.typicode.com/comments\"\r\n        );\r\n        const items = await response.json();\r\n        const preparedItems = items.map(({ id, name, email, body }) => ({\r\n          id,\r\n          name,\r\n          email,\r\n          body,\r\n        }));\r\n\r\n        setComments(preparedItems);\r\n        setSortedComments(preparedItems.slice(0, perPage));\r\n        setIsLoaded(true);\r\n      } catch (error) {\r\n        setIsLoaded(true);\r\n        setError(error);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const indexOfLastComment = currentPage * perPage;\r\n  const indexOfFirstComment = indexOfLastComment - perPage;\r\n  const currentComments = comments.slice(\r\n    indexOfFirstComment,\r\n    indexOfLastComment\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setSortedComments(currentComments);\r\n  }, [currentPage, perPage]);\r\n\r\n  const handleClickSort = (e) => {\r\n    const field = e.target.dataset.field;\r\n    let direction = isSorted ? -1 : 1;\r\n    const sortedElements = currentComments.sort((a, b) => {\r\n      if (a[field] === b[field]) return 0;\r\n      return a[field] > b[field] ? direction : -direction;\r\n    });\r\n\r\n    setSortedComments([...sortedElements]);\r\n    setIsSorted(!isSorted);\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    const value = e.target.value.toString().toLowerCase();\r\n    const filteredItems = currentComments.filter((item) => {\r\n      const test = Object.keys(item).some((field) => {\r\n        if (item[field] !== Object(item[field])) {\r\n          const result =\r\n            item[field].toString().toLowerCase().search(value) !== -1;\r\n          if (result) {\r\n            return item;\r\n          }\r\n        }\r\n      });\r\n      return test;\r\n    });\r\n    setSortedComments(filteredItems);\r\n  };\r\n  const handleChangePerPage = (e) => {\r\n    setPerPage(e.target.value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const paginate = (pageNumber) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  if (error) {\r\n    return <p>Error {error.message} </p>;\r\n  } else if (!isLoaded) {\r\n    return \"loading...\";\r\n  } else {\r\n    return (\r\n      <div className={styles.main}>\r\n        <div className={styles.container}>\r\n          <Search\r\n            onChangePerPage={handleChangePerPage}\r\n            onChange={handleSearch}\r\n          />\r\n          <table>\r\n            <thead>\r\n              <th data-field=\"id\" onClick={handleClickSort}>\r\n                Id\r\n              </th>\r\n              <th data-field=\"name\" onClick={handleClickSort}>\r\n                Name\r\n              </th>\r\n              <th data-field=\"body\" onClick={handleClickSort}>\r\n                body\r\n              </th>\r\n              <th data-field=\"email\" onClick={handleClickSort}>\r\n                E-mail\r\n              </th>\r\n            </thead>\r\n            <tbody>\r\n              {sortedComments.map((el) => {\r\n                return (\r\n                  <tr className={styles.row}>\r\n                    <td className=\"id\">{el.id}</td>\r\n                    <td className=\"name\">{el.name}</td>\r\n                    <td className=\"body\">{el.body}</td>\r\n                    <td className=\"email\">{el.email}</td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n          <Pagination\r\n            paginate={paginate}\r\n            perPage={perPage}\r\n            totalComments={comments.length}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Table } from \"../Table/Table\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <div>\r\n      <Table />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./Components/App/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Table_main__2T6sv\",\"container\":\"Table_container__FHgIS\",\"search\":\"Table_search__3hcRd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__gK_Vv\",\"pageItems\":\"Pagination_pageItems__rRKgh\"};"],"sourceRoot":""}